<!DOCTYPE html><html lang="en"><head>
<meta charset="utf-8">
<meta name="generator" content="ReSpec 26.8.4">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<style>
dfn{cursor:pointer}
.dfn-panel{position:absolute;z-index:35;min-width:300px;max-width:500px;padding:.5em .75em;margin-top:.6em;font:small Helvetica Neue,sans-serif,Droid Sans Fallback;background:#fff;color:#000;box-shadow:0 1em 3em -.4em rgba(0,0,0,.3),0 0 1px 1px rgba(0,0,0,.05);border-radius:2px}
.dfn-panel:not(.docked)>.caret{position:absolute;top:-9px}
.dfn-panel:not(.docked)>.caret::after,.dfn-panel:not(.docked)>.caret::before{content:"";position:absolute;border:10px solid transparent;border-top:0;border-bottom:10px solid #fff;top:0}
.dfn-panel:not(.docked)>.caret::before{border-bottom:9px solid #a2a9b1}
.dfn-panel *{margin:0}
.dfn-panel b{display:block;color:#000;margin-top:.25em}
.dfn-panel ul a[href]{color:#333}
.dfn-panel>div{display:flex}
.dfn-panel a.self-link{font-weight:700;margin-right:auto}
.dfn-panel .marker{padding:.1em;margin-left:.5em;border-radius:.2em;text-align:center;white-space:nowrap;font-size:90%;color:#040b1c}
.dfn-panel .marker.dfn-exported{background:#d1edfd;box-shadow:0 0 0 .125em #1ca5f940}
.dfn-panel .marker.idl-block{background:#8ccbf2;box-shadow:0 0 0 .125em #0670b161}
.dfn-panel a:not(:hover){text-decoration:none!important;border-bottom:none!important}
.dfn-panel a[href]:hover{border-bottom-width:1px}
.dfn-panel ul{padding:0}
.dfn-panel li{margin-left:1em}
.dfn-panel.docked{position:fixed;left:.5em;top:unset;bottom:2em;margin:0 auto;max-width:calc(100vw - .75em * 2 - .5em - .2em * 2);max-height:30vh;overflow:auto}
</style>



<title>Japanese Gap Analysis</title>




  

<style>
body { font-size: 15px; }
h2 { margin-left: 0; margin-top: 8em; }
h3 { margin-top: 3em; }
h3 a { color: #006; }
h3 a:link { color: #006; }
h3 a:active { color: #006; }
h3 a:visited { color: #006; }
h4 { margin-left: 0; }



.status_prompt {
    font-style: italic;
    color: #aaa;
    font-size: 90%;
    margin-bottom: 4em;
    }


.ok { border-left: 5em solid green; padding-left: 2em; }
.ok:after { content: 'OK'; color: gray; font-weight: normal; font-size: 120%; }

.na { border-left: 5em solid green; padding-left: 2em; }
.na:after { content: 'Not applicable'; color: gray; font-weight: normal; font-size: 120%; }

.advanced { border-left: 5em solid #0f0; padding-left: 2em; }
.advanced { border-left: 5em solid moccasin; padding-left: 2em; }
.advanced:after { content: 'Needs work for advanced level support.'; color: gray; font-weight: normal; font-size: 120%; }

.basic { border-left: 5em solid orange; padding-left: 2em; }
.basic:after { content: 'Needs work for basic styling support.'; color: gray; font-weight: normal; font-size: 120%; }

.broken { border-left: 5em solid red; padding-left: 2em; }
.broken:after { content: 'Basic display issues that prevent effective use on the Web for this language.'; color: gray; font-weight: normal; font-size: 120%; }


.tbd { border-left: 5em solid #eee; padding-left: 2em; }
.tbd:after { content: 'Needs research.'; color: gray; font-weight: normal; font-size: 120%; }

.pass { background-color:greenyellow; padding: 0 4px; border-radius: 2px;  }
.fail { padding: 0 4px; color: white; background-color: crimson; border-radius: 2px; }
.partial { background-color: orange;  padding: 0 4px; color: white;  }

.reviewme:after {
	content: "Needs review";
	margin-left: 2em;
	background-color: crimson;
	color: white;
	font-size: 80%;
	padding: .2em .4em;
	border-radius: .2em;
	}

.subhead {
	display: block;
	font-weight: bold;
	}

</style>

<style id="respec-mainstyle">
@keyframes pop{
0%{transform:scale(1,1)}
25%{transform:scale(1.25,1.25);opacity:.75}
100%{transform:scale(1,1)}
}
.hljs{background:0 0!important}
a abbr,h1 abbr,h2 abbr,h3 abbr,h4 abbr,h5 abbr,h6 abbr{border:none}
dfn{font-weight:700}
a.internalDFN{color:inherit;border-bottom:1px solid #99c;text-decoration:none}
a.externalDFN{color:inherit;border-bottom:1px dotted #ccc;text-decoration:none}
a.bibref{text-decoration:none}
.respec-offending-element:target{animation:pop .25s ease-in-out 0s 1}
.respec-offending-element,a[href].respec-offending-element{text-decoration:red wavy underline}
@supports not (text-decoration:red wavy underline){
.respec-offending-element:not(pre){display:inline-block}
.respec-offending-element{background:url(data:image/gif;base64,R0lGODdhBAADAPEAANv///8AAP///wAAACwAAAAABAADAEACBZQjmIAFADs=) bottom repeat-x}
}
#references :target{background:#eaf3ff;animation:pop .4s ease-in-out 0s 1}
cite .bibref{font-style:normal}
code{color:#c63501}
th code{color:inherit}
a[href].orcid{padding-left:4px;padding-right:4px}
a[href].orcid>svg{margin-bottom:-2px}
.toc a,.tof a{text-decoration:none}
a .figno,a .secno{color:#000}
ol.tof,ul.tof{list-style:none outside none}
.caption{margin-top:.5em;font-style:italic}
table.simple{border-spacing:0;border-collapse:collapse;border-bottom:3px solid #005a9c}
.simple th{background:#005a9c;color:#fff;padding:3px 5px;text-align:left}
.simple th a{color:#fff;padding:3px 5px;text-align:left}
.simple th[scope=row]{background:inherit;color:inherit;border-top:1px solid #ddd}
.simple td{padding:3px 10px;border-top:1px solid #ddd}
.simple tr:nth-child(even){background:#f0f6ff}
.section dd>p:first-child{margin-top:0}
.section dd>p:last-child{margin-bottom:0}
.section dd{margin-bottom:1em}
.section dl.attrs dd,.section dl.eldef dd{margin-bottom:0}
#issue-summary>ul{column-count:2}
#issue-summary li{list-style:none;display:inline-block}
details.respec-tests-details{margin-left:1em;display:inline-block;vertical-align:top}
details.respec-tests-details>*{padding-right:2em}
details.respec-tests-details[open]{z-index:999999;position:absolute;border:thin solid #cad3e2;border-radius:.3em;background-color:#fff;padding-bottom:.5em}
details.respec-tests-details[open]>summary{border-bottom:thin solid #cad3e2;padding-left:1em;margin-bottom:1em;line-height:2em}
details.respec-tests-details>ul{width:100%;margin-top:-.3em}
details.respec-tests-details>li{padding-left:1em}
a[href].self-link:hover{opacity:1;text-decoration:none;background-color:transparent}
h2,h3,h4,h5,h6{position:relative}
aside.example .marker>a.self-link{color:inherit}
h2>a.self-link,h3>a.self-link,h4>a.self-link,h5>a.self-link,h6>a.self-link{border:none;color:inherit;font-size:83%;height:2em;left:-1.6em;opacity:.5;position:absolute;text-align:center;text-decoration:none;top:0;transition:opacity .2s;width:2em}
h2>a.self-link::before,h3>a.self-link::before,h4>a.self-link::before,h5>a.self-link::before,h6>a.self-link::before{content:"§";display:block}
@media (max-width:767px){
dd{margin-left:0}
h2>a.self-link,h3>a.self-link,h4>a.self-link,h5>a.self-link,h6>a.self-link{left:auto;top:auto}
}
@media print{
.removeOnSave{display:none}
}
</style>
<meta name="description" content="This document describes and prioritises gaps for the support of Japanese on the Web and in eBooks. In particular, it is concerned with text layout. It checks that needed features are supported in W3C specifications, in particular HTML and CSS and those relating to digital publications. It also checks whether the features have been implemented in browsers and ereaders. This is a preliminary analysis.">
<link rel="canonical" href="https://www.w3.org/TR/jpan-gap/">
<style>
.hljs{display:block;overflow-x:auto;padding:.5em;color:#383a42;background:#fafafa}
.hljs-comment,.hljs-quote{color:#717277;font-style:italic}
.hljs-doctag,.hljs-formula,.hljs-keyword{color:#a626a4}
.hljs-deletion,.hljs-name,.hljs-section,.hljs-selector-tag,.hljs-subst{color:#ca4706;font-weight:700}
.hljs-literal{color:#0b76c5}
.hljs-addition,.hljs-attribute,.hljs-meta-string,.hljs-regexp,.hljs-string{color:#42803c}
.hljs-built_in,.hljs-class .hljs-title{color:#9a6a01}
.hljs-attr,.hljs-number,.hljs-selector-attr,.hljs-selector-class,.hljs-selector-pseudo,.hljs-template-variable,.hljs-type,.hljs-variable{color:#986801}
.hljs-bullet,.hljs-link,.hljs-meta,.hljs-selector-id,.hljs-symbol,.hljs-title{color:#336ae3}
.hljs-emphasis{font-style:italic}
.hljs-strong{font-weight:700}
.hljs-link{text-decoration:underline}
</style>
<style>
var{position:relative;cursor:pointer}
var[data-type]::after,var[data-type]::before{position:absolute;left:50%;top:-6px;opacity:0;transition:opacity .4s;pointer-events:none}
var[data-type]::before{content:"";transform:translateX(-50%);border-width:4px 6px 0 6px;border-style:solid;border-color:transparent;border-top-color:#000}
var[data-type]::after{content:attr(data-type);transform:translateX(-50%) translateY(-100%);background:#000;text-align:center;font-family:"Dank Mono","Fira Code",monospace;font-style:normal;padding:6px;border-radius:3px;color:#daca88;text-indent:0;font-weight:400}
var[data-type]:hover::after,var[data-type]:hover::before{opacity:1}
</style>
<script id="initialUserConfig" type="application/json">{
  "specStatus": "ED",
  "noRecTrack": true,
  "shortName": "jpan-gap",
  "copyrightStart": "2018",
  "edDraftURI": "https://w3c.github.io/jlreq/gap-analysis/",
  "langs": [
    "Japanese"
  ],
  "gapDocPath": "https://www.w3.org/TR/jpan-gap/",
  "editors": [
    {
      "name": "Richard Ishida",
      "mailto": "ishida@w3.org",
      "company": "W3C",
      "w3cid": 3439,
      "url": "mailto:ishida@w3.org"
    }
  ],
  "group": "i18n",
  "github": "w3c/jlreq",
  "preProcess": [
    null,
    null
  ],
  "postProcess": [
    null
  ],
  "publishISODate": "2021-05-30T00:00:00.000Z",
  "generatedSubtitle": "Editor's Draft 30 May 2021"
}</script>
<link rel="stylesheet" href="https://www.w3.org/StyleSheets/TR/2016/W3C-ED"></head>

<body class="h-entry informative"><div class="head">
    <a class="logo" href="https://www.w3.org/"><img alt="W3C" width="72" height="48" src="https://www.w3.org/StyleSheets/TR/2016/logos/W3C"></a> <h1 id="title" class="title">Japanese Gap Analysis</h1>
    
    <h2>
      W3C Editor's Draft
      <time class="dt-published" datetime="2021-05-30">30 May 2021</time>
    </h2>
    <dl>
      <dt>This version:</dt><dd>
              <a class="u-url" href="https://w3c.github.io/jlreq/gap-analysis/">https://w3c.github.io/jlreq/gap-analysis/</a>
            </dd><dt>Latest published version:</dt><dd>
              <a href="https://www.w3.org/TR/jpan-gap/">https://www.w3.org/TR/jpan-gap/</a>
            </dd>
      <dt>Latest editor's draft:</dt><dd><a href="https://w3c.github.io/jlreq/gap-analysis/">https://w3c.github.io/jlreq/gap-analysis/</a></dd>
      
      
      
      
      
      <dt>Editor:</dt>
      <dd class="editor p-author h-card vcard" data-editor-id="3439">
    <a class="ed_mailto u-email email p-name" href="mailto:ishida@w3.org">Richard Ishida</a> (<span class="p-org org h-org">W3C</span>)
  </dd>
      
      
      <dt>Participate:</dt><dd>
    <a href="https://github.com/w3c/jlreq/">GitHub w3c/jlreq</a>
  </dd><dd>
    <a href="https://github.com/w3c/jlreq/issues/">File an issue</a>
  </dd><dd>
    <a href="https://github.com/w3c/jlreq/commits/gh-pages">Commit history</a>
  </dd><dd>
    <a href="https://github.com/w3c/jlreq/pulls/">Pull requests</a>
  </dd>
    </dl>
    
    
    
    <p class="copyright">
    <a href="https://www.w3.org/Consortium/Legal/ipr-notice#Copyright">Copyright</a>
    ©
    2018-2021
    
    <a href="https://www.w3.org/"><abbr title="World Wide Web Consortium">W3C</abbr></a><sup>®</sup> (<a href="https://www.csail.mit.edu/"><abbr title="Massachusetts Institute of Technology">MIT</abbr></a>,
    <a href="https://www.ercim.eu/"><abbr title="European Research Consortium for Informatics and Mathematics">ERCIM</abbr></a>, <a href="https://www.keio.ac.jp/">Keio</a>,
    <a href="https://ev.buaa.edu.cn/">Beihang</a>). 
    W3C <a href="https://www.w3.org/Consortium/Legal/ipr-notice#Legal_Disclaimer">liability</a>,
    <a href="https://www.w3.org/Consortium/Legal/ipr-notice#W3C_Trademarks">trademark</a> and <a rel="license" href="https://www.w3.org/Consortium/Legal/2015/copyright-software-and-document">permissive document license</a> rules
    apply.
  </p>
    <hr title="Separator for header">
  </div>
  <div id="abstract" class="introductory"><h2>Abstract</h2>
    <p>This document describes and prioritises gaps for the support of Japanese on the Web and in eBooks. In particular, it is concerned with text layout. It checks that needed features are supported in <abbr title="World Wide Web Consortium">W3C</abbr> specifications, in particular HTML and CSS and those relating to digital publications. It also checks whether the features have been implemented in browsers and ereaders. <strong>This is a preliminary analysis.</strong></p>
  </div>

  <div id="sotd" class="introductory"><h2>Status of This Document</h2><p><em>This section describes the status of this
      document at the time of its publication. Other documents may supersede
      this document. A list of current <abbr title="World Wide Web Consortium">W3C</abbr> publications and the latest revision
      of this technical report can be found in the
      <a href="https://www.w3.org/TR/"><abbr title="World Wide Web Consortium">W3C</abbr> technical reports index</a> at
      https://www.w3.org/TR/.</em></p>
    <p>This document describes and prioritises gaps for the support of Japanese on the Web and in eBooks. In particular, it is concerned with text layout. It checks that needed features are supported in <abbr title="World Wide Web Consortium">W3C</abbr> specifications, in particular HTML and CSS and those relating to digital publications. It also checks whether the features have been implemented in browsers and ereaders. This document complements the document <a href="https://www.w3.org/TR/jlreq/">Text Layout Requirements for the Japanese Script</a>, which describes the requirements for areas where gaps appear. It is linked to from the <a href="https://w3c.github.io/typography/gap-analysis/language-matrix.html">language matrix</a> that tracks Web support for many languages.</p>
<p>The editor's draft of this document is being developed by the <a href="https://w3c.github.io/jlreq/">Japanese Layout Task Force</a>, part of the <abbr title="World Wide Web Consortium">W3C</abbr> <a href="https://www.w3.org/International/ig/">Internationalization Interest Group</a>. It is published by the <a href="https://www.w3.org/International/core/">Internationalization Working Group</a>. The end target for this document is a Working Group Note.</p>
<p>
    This document was published by the <a href="https://www.w3.org/International/core/">Internationalization Working Group</a> as an
    Editor's Draft. 
    
  </p><p>
    <a href="https://github.com/w3c/jlreq/issues/">GitHub Issues</a> are preferred for
          discussion of this specification.
        
    
  </p><p>
      Publication as an Editor's Draft does not imply endorsement
      by the <abbr title="World Wide Web Consortium">W3C</abbr> Membership. 
    </p><p>This is a draft document and may be updated, replaced
  or obsoleted by other documents at any time. It is inappropriate to cite this
  document as other than work in progress.
  </p><p></p><p>
    
        This document was produced by a group
        operating under the
        <a href="https://www.w3.org/Consortium/Patent-Policy-20170801/">1 August 2017 <abbr title="World Wide Web Consortium">W3C</abbr> Patent
          Policy</a>.
       The group does not expect this document to become a <abbr title="World Wide Web Consortium">W3C</abbr> Recommendation.
    
                <abbr title="World Wide Web Consortium">W3C</abbr> maintains a
                <a rel="disclosure" href="https://www.w3.org/groups/wg/i18n-core/ipr">public list of any patent disclosures</a>
          made in connection with the deliverables of
          the group; that page also includes
          instructions for disclosing a patent. An individual who has actual
          knowledge of a patent which the individual believes contains
          <a href="https://www.w3.org/Consortium/Patent-Policy-20170801/#def-essential">Essential Claim(s)</a>
          must disclose the information in accordance with
          <a href="https://www.w3.org/Consortium/Patent-Policy-20170801/#sec-Disclosure">section 6 of the <abbr title="World Wide Web Consortium">W3C</abbr> Patent Policy</a>.
        
    
  </p><p>
                  This document is governed by the
                  <a id="w3c_process_revision" href="https://www.w3.org/2020/Process-20200915/">15 September 2020 <abbr title="World Wide Web Consortium">W3C</abbr> Process Document</a>.
                </p></div><nav id="toc"><h2 class="introductory" id="table-of-contents">Table of Contents</h2><ol class="toc"><li class="tocline"><a class="tocxref" href="#h_introduction"><bdi class="secno">1. </bdi>Introduction</a><ol class="toc"><li class="tocline"><a class="tocxref" href="#workflow"><bdi class="secno">1.1 </bdi>Work flow</a></li><li class="tocline"><a class="tocxref" href="#prioritization"><bdi class="secno">1.2 </bdi>Prioritization</a></li></ol></li><li class="tocline"><a class="tocxref" href="#direction"><bdi class="secno">2. </bdi>Text direction</a><ol class="toc"><li class="tocline"><a class="tocxref" href="#vertical_text"><bdi class="secno">2.1 </bdi>Vertical text</a></li><li class="tocline"><a class="tocxref" href="#bidi_text"><bdi class="secno">2.2 </bdi>Bidirectional text</a></li></ol></li><li class="tocline"><a class="tocxref" href="#h_characters_and_phrases"><bdi class="secno">3. </bdi>Characters and phrases</a><ol class="toc"><li class="tocline"><a class="tocxref" href="#charset"><bdi class="secno">3.1 </bdi>Characters &amp; encoding</a></li><li class="tocline"><a class="tocxref" href="#fonts"><bdi class="secno">3.2 </bdi>Fonts</a></li><li class="tocline"><a class="tocxref" href="#font_style"><bdi class="secno">3.3 </bdi>Font  styles, weight, etc</a></li><li class="tocline"><a class="tocxref" href="#glyphs"><bdi class="secno">3.4 </bdi>Glyph shaping and positioning</a></li><li class="tocline"><a class="tocxref" href="#cursive"><bdi class="secno">3.5 </bdi>Cursive text</a></li><li class="tocline"><a class="tocxref" href="#baselines"><bdi class="secno">3.6 </bdi>Baselines, line-height, etc</a></li><li class="tocline"><a class="tocxref" href="#transforms"><bdi class="secno">3.7 </bdi>Transforming characters</a></li><li class="tocline"><a class="tocxref" href="#segmentation"><bdi class="secno">3.8 </bdi>Grapheme/word segmentation &amp; selection</a></li><li class="tocline"><a class="tocxref" href="#punctuation_etc"><bdi class="secno">3.9 </bdi>Inline features &amp; punctuation</a></li><li class="tocline"><a class="tocxref" href="#text_decoration"><bdi class="secno">3.10 </bdi>Text decoration</a></li><li class="tocline"><a class="tocxref" href="#quotations"><bdi class="secno">3.11 </bdi>Quotations</a></li><li class="tocline"><a class="tocxref" href="#inline_notes"><bdi class="secno">3.12 </bdi>Inline notes &amp; annotations</a></li><li class="tocline"><a class="tocxref" href="#data_formats"><bdi class="secno">3.13 </bdi>Data formats &amp; numbers</a></li></ol></li><li class="tocline"><a class="tocxref" href="#h_lines_and_paragraphs"><bdi class="secno">4. </bdi>Lines and Paragraphs</a><ol class="toc"><li class="tocline"><a class="tocxref" href="#line_breaking"><bdi class="secno">4.1 </bdi>Line breaking</a></li><li class="tocline"><a class="tocxref" href="#hyphenation"><bdi class="secno">4.2 </bdi>Hyphenation</a></li><li class="tocline"><a class="tocxref" href="#justification"><bdi class="secno">4.3 </bdi>Text alignment &amp; justification</a></li><li class="tocline"><a class="tocxref" href="#spacing"><bdi class="secno">4.4 </bdi>Letter spacing</a></li><li class="tocline"><a class="tocxref" href="#lists"><bdi class="secno">4.5 </bdi>Lists, counters, etc.</a></li><li class="tocline"><a class="tocxref" href="#initials"><bdi class="secno">4.6 </bdi>Styling initials</a></li></ol></li><li class="tocline"><a class="tocxref" href="#h_pages"><bdi class="secno">5. </bdi>Page &amp; book layout</a><ol class="toc"><li class="tocline"><a class="tocxref" href="#page_layout"><bdi class="secno">5.1 </bdi>General page layout &amp; progression</a></li><li class="tocline"><a class="tocxref" href="#footnotes_etc"><bdi class="secno">5.2 </bdi>Footnotes, endnotes, etc.</a></li><li class="tocline"><a class="tocxref" href="#headers_footers"><bdi class="secno">5.3 </bdi>Page headers, footers, etc.</a></li><li class="tocline"><a class="tocxref" href="#interaction"><bdi class="secno">5.4 </bdi>Forms &amp; user interaction</a></li></ol></li><li class="tocline"><a class="tocxref" href="#h_other"><bdi class="secno">6. </bdi>Other</a><ol class="toc"><li class="tocline"><a class="tocxref" href="#culturespecific"><bdi class="secno">6.1 </bdi>Culture-specific features</a></li><li class="tocline"><a class="tocxref" href="#other"><bdi class="secno">6.2 </bdi>What else?</a></li></ol></li></ol></nav>

  <section id="h_introduction">
    <h2 id="x1-introduction"><bdi class="secno">1. </bdi>Introduction<a class="self-link" aria-label="§" href="#h_introduction"></a></h2>
    <p>The <abbr title="World Wide Web Consortium">W3C</abbr> needs to make sure that the  needs of scripts and languages around the world are built in to technologies such as HTML, CSS, SVG, etc. so that Web pages and eBooks can look and behave as people expect around the world.</p>
    
    <p>This page documents difficulties people encounter when trying to use the Japanese language and script on the Web. </p>
<p>Having identified an issue, it investigates the current status with regards to web specifications and implementations by user agents (browsers, e-readers, etc.), and attempts to prioritise the severity of the issue for web users.</p>

    <p>A summary of this report and others can be found as part of the <a href="https://w3c.github.io/typography/gap-analysis/language-matrix.html" style="font-size: 140%;">language matrix</a>.</p>
    
    <section id="workflow">
    <h3 id="x1-1-work-flow"><bdi class="secno">1.1 </bdi>Work flow<a class="self-link" aria-label="§" href="#workflow"></a></h3>
    <p><span style="font-weight:bold; font-size: 140%;">This version of the document is a preliminary analysis</span></p>

    <p>Gap analysis work usually starts with a <strong>preliminary analysis</strong>, conducted quickly by one or a small group of experts. Then a more <strong>detailed analysis</strong> is carried out, involving a wider range of experts. The detailed analysis may involve the development of tests, in order to illustrate issues and track results for browsers. The next phase is <strong>ongoing maintenance</strong>. It is expected that the resulting document will not be frozen: as gaps are fixed, this should be noted in the document. It is also possible that new gaps are noticed or arise, and they can be added to this document when that happens.</p>
    
    <p>As the gap analysis develops, the requirements for features that are problematic should be described in the companion document, <a href="https://www.w3.org/TR/jlreq/">Japanese Layout Requirements</a>. Links to the appropriate part of that document should be added to this document as the material is created. Note that the requirements document should not contain any technology-specific information: all of that belongs here.</p>
    </section>
    
    <section id="prioritization">
    <h3 id="x1-2-prioritization"><bdi class="secno">1.2 </bdi>Prioritization<a class="self-link" aria-label="§" href="#prioritization"></a></h3>
    <p>This document not only describes gaps, it also attempts to prioritise them in terms of the impact on the local user. The prioritisation is indicated by colour.</p>
        
        <p>Key:</p>
  <ul style="list-style-type: none;">
        <li class="ok"></li>
        <li class="na"></li>
        <li class="advanced"></li>
        <li class="basic"></li>
        <li class="broken"></li>
        <li class="tbd"></li>
        </ul>
    
    <p>It is important to note that these colours do not indicate to what extent a particular features is broken. They indicate the impact of a broken or missing feature on the content author or end user.</p>
    <p>Basic styling is the level that would be generally accepted as sufficient for most Web pages. Advanced level support would include additional features one might expect to include in ebooks or other advanced typographic formats. There may be features of a script or language that are not supported on the Web, but that are not generally regarded as necessary (usually archaic or obscure features). In this case, the feature can be described here, but the status should be marked as OK.</p>
    <p>The decision as to what priority level is assigned to a described gap is down to the experts doing the gap analysis. It may not always be straightforward to decide. If a given section in this document refers to more than one feature that is broken, each with different impacts on Web users, the priority for the section should be the lowest denominator.</p>
    <p>A cell can be scored as OK if the feature in question is specified in an appropriate specification, and is supported by user agents. A specification that is in CR or later and has two implementations in 'major' browsers will count. This means that the feature may not be supported in all browsers yet. (At some point in the future we may try to distinguish, visually, whether support is available in a specification but still pending in major browsers or applications.) </p>
    </section>
</section>
    
    
    


<section id="direction">
<h2 id="x2-text-direction"><bdi class="secno">2. </bdi>Text direction<a class="self-link" aria-label="§" href="#direction"></a></h2>
<p>See also General page layout &amp; progression for features such as column layout, page turning direction, etc. that are affected by text direction.</p>


<section id="vertical_text" class="basic">
<h3 id="x2-1-vertical-text"><bdi class="secno">2.1 </bdi>Vertical text<a class="self-link" aria-label="§" href="#vertical_text"></a></h3>
<p id="prompt-vertical_text" class="status_prompt promptStub">Are the script requirements for vertically oriented text met?  What about if you mix vertical text with scripts that are normally only horizontal? Do you need a switch to use different characters in vertical vs. horizontal text? Does the browser support short runs of horizontal text in vertical lines (tate-chu-yoko in Japanese) as expected? Is the orientation of characters and the directional ordering of characters supported as needed? <a href="https://www.w3.org/TR/typography/#vertical_text">See available information</a> or <a href="https://github.com/w3c/i18n-activity/issues?utf8=%E2%9C%93&amp;q=is%3Aissue%20is%3Aopen%20label%3Ai%3Avertical-text%20label%3Atype-info-request">check for currently needed data</a>.</p>

<div id="insert-vertical_text"><section id="issue180_vertical_text">
<h4 id="x180-exceptional-positioning-of-ideographic-comma-and-katakana-middle-dot-in-vertical-text"><a target="_blank" href="https://github.com/w3c/jlreq/issues/180">#180</a> Exceptional positioning of ideographic comma and katakana middle dot in vertical text<a class="self-link" aria-label="§" href="#issue180_vertical_text"></a></h4>
<p>It should be possible to decrease the size around the ideographic comma (1/2em) and katakana middle dot (1/4em) in numerical values in vertical text. See <a href="https://www.w3.org/TR/jlreq/#exceptional_positioning_of_ideographic_comma_and_katakana_middle_dot">Exceptional Positioning of Ideographic Comma and Katakana Middle Dot</a>.</p><p><img src="images/106179078-73273180-6192-11eb-8050-0b77d33c382a.png" alt="img2_11"></p><p>There is a <a href="https://github.com/w3c/jlreq/issues/164">related discussion</a> about how to achieve this.</p><p><strong>Tests &amp; results:</strong>
interactive <a href="https://w3c.github.io/i18n-tests/exploratory/vertical_text/int-vertical-text?text=%E4%B8%89%E3%80%81%E5%9B%9B%E4%BA%94%E5%85%AD%E3%80%81%E4%B8%83%E5%85%AB%E4%B9%9D%E4%BA%BA&amp;lang=ja&amp;fontSize=36&amp;height=500&amp;writingMode=vertical-rl&amp;textOrientation=mixed&amp;textCombineUpright=none">test</a></p>
</section>
<section id="issue171_vertical_text">
<h4 id="x171-table-cells-don-t-handle-vertical-direction-properly"><a target="_blank" href="https://github.com/w3c/jlreq/issues/171">#171</a> Table cells don't handle vertical direction properly<a class="self-link" aria-label="§" href="#issue171_vertical_text"></a></h4>
<p>If you place the <code class="kw" translate="no">writing-mode</code> property with a value of <code class="kw" translate="no">vertical-rl</code> on an individual table cell, you would expect the text in that cell to be displayed vertically. This works as expected in <span class="pass">Gecko</span> browsers, as well as in <span class="pass">legacy Edge</span> and <span class="pass">Internet Explorer</span>. However, <span class="fail">Blink</span> browsers (Chrome, Edge, etc) don't apply vertical writing mode, and <span class="fail">Webkit</span> browsers, leave the text horizontal but rotate the Japanese characters to the left.</p><p>See <a href="https://w3c.github.io/i18n-tests/exploratory/vanilla/?text=%3Ctable%20style%3D%22border%3A1px%20solid%20red%3Bmargin%3A1em%3B%22%3E%3Ctr%3E%3Ctd%20style%3D%22writing-mode%3Avertical-rl%3B%22%3E%E7%B8%A6%E6%9B%B8%E3%81%8D%3C%2Ftd%3E%3Ctd%3E%E6%A8%AA%E6%9B%B8%E3%81%8D%3C%2Ftd%3E%3C%2Ftr%3E%3Ctr%3E%3Ctd%3E%E6%A8%AA%E6%9B%B8%E3%81%8D%3C%2Ftd%3E%3Ctd%20style%3D%22writing-mode%3Avertical-rl%3Bheight%3A5em%22%3E%E7%B8%A6%E6%9B%B8%E3%81%8D%3C%2Ftd%3E%3C%2Ftr%3E%3C%2Ftable%3E&amp;lang=ja&amp;fontSize=36&amp;width=500&amp;height=500">a test</a>.</p><p>Wrapping the text to be made vertical in a <code translate="no">span</code> inside the cell, and applying <code translate="no">writing-mode:vertical-rl</code> to that gives the expected result in Blink, but in Safari it's necessary to also apply a height setting for the text to display properly.</p><p>See <a href="https://w3c.github.io/i18n-tests/exploratory/vanilla/?text=%3Ctable%20style%3D%22border%3A1px%20solid%20red%3Bmargin%3A1em%3B%22%3E%3Ctr%3E%3Ctd%3E%3Cspan%20style%3D%22writing-mode%3Avertical-rl%3B%22%3E%E7%B8%A6%E6%9B%B8%E3%81%8D%3C%2Fspan%3E%3C%2Ftd%3E%3Ctd%3E%E6%A8%AA%E6%9B%B8%E3%81%8D%3C%2Ftd%3E%3C%2Ftr%3E%3Ctr%3E%3Ctd%3E%E6%A8%AA%E6%9B%B8%E3%81%8D%3C%2Ftd%3E%3Ctd%3E%3Cspan%20style%3D%22writing-mode%3Avertical-rl%3Bheight%3A5em%3B%22%3E%E7%B8%A6%E6%9B%B8%E3%81%8D%3C%2Fspan%3E%3C%2Ftd%3E%3C%2Ftr%3E%3C%2Ftable%3E&amp;lang=ja&amp;fontSize=36&amp;width=500&amp;height=500">a test for span</a>.</p><p>Browser bugs raised: 
<a href="https://bugs.chromium.org/p/chromium/issues/detail?id=409155">Chromium</a> 
<a href="https://bugs.webkit.org/show_bug.cgi?id=65917">Webkit</a></p>
</section>
<section id="issue170_vertical_text">
<h4 id="x170-unable-to-make-list-counters-stand-upright-in-vertical-text"><a target="_blank" href="https://github.com/w3c/jlreq/issues/170">#170</a> Unable to make list counters stand upright in vertical text<a class="self-link" aria-label="§" href="#issue170_vertical_text"></a></h4>
<p>A common way to orient counters for lists in vertical text is to have an upright number with a dot alongside it.<a href="https://w3c.github.io/i18n-drafts/articles/vertical-text/index-data/tcu-all-pref.html" target="text"></a></p><p><img src="images/73653505-33159780-4681-11ea-9b21-0c036e0a4d45.png" alt="vertical-lists"></p><p>The expected way to achieve this in HTML would be to use the following CSS: <code>li::marker { text-combine-upright: all; }</code>, however this cannot be used because browsers don't support <code class="kw" translate="no">text-combine-upright</code>.  </p><p>Try <a href="https://w3c.github.io/i18n-tests/exploratory/lists/int-lists?text=%3Col%3E%3Cli%3Eone%3C%2Fli%3E%3Cli%3Etwo%3C%2Fli%3E%3Cli%3Ethree%3C%2Fli%3E%3C%2Fol%3E%0A&amp;fontSize=36&amp;height=250&amp;color=red&amp;textCombineUpright=all&amp;writingMode=vertical-rl">this test</a></p><p>A workaround might be to use fullwidth characters for counters, such as ①, ②, ③ etc., but use of such a workaround requires the availability of custom built counter styles, and only Firefox currently supports the CSS Counter Styles specification. So that doesn't work either. </p><p>Try  <a href="https://w3c.github.io/i18n-drafts/articles/vertical-text/index-data/korean-list-counterstyles.html" target="text">this test</a> </p><p>It is a significant nuisance for content authoring to not be able to produce upright counters for lists. This is a very common approach to numbering lists in vertical text, and should be possible on the Web.</p><p>Browser bugs raised:
<a href="https://bugs.chromium.org/p/chromium/issues/detail?id=457718">Chromium</a>
<a href="https://bugs.webkit.org/show_bug.cgi?id=150821">Webkit</a>
<a href="https://bugs.webkit.org/show_bug.cgi?id=204163">Webkit</a>
<a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1604328">Mozilla</a>
</p>
</section>
<section id="issue169_vertical_text">
<h4 id="x169-tate-chu-yoko-lacks-support-for-digits-value"><a target="_blank" href="https://github.com/w3c/jlreq/issues/169">#169</a> Tate-chu-yoko lacks support for digits value<a class="self-link" aria-label="§" href="#issue169_vertical_text"></a></h4>
<p><i class="meta">This issue is applicable to Chinese, Japanese, Korean, and Mongolian.</i></p><p>The CSS <code translate="no">text-combine-upright</code> property works with the all value in all major browsers. However, the CSS <code translate="no">digits</code> value is not supported by recent version of major browser engines.</p><p><b class="meta">For more details, see <a href="https://github.com/w3c/clreq/issues/249">this GitHub issue</a>, which is being used to track this gap.</b>
</p>
</section>
<section id="issue168_vertical_text">
<h4 id="x168-upright-text-orientation-not-supported"><a target="_blank" href="https://github.com/w3c/jlreq/issues/168">#168</a> Upright text orientation not supported<a class="self-link" aria-label="§" href="#issue168_vertical_text"></a></h4>
<p><i class="meta">This issue is applicable to Chinese, Japanese, Korean, and Mongolian.</i></p><p>The CSS text-orientation property is only supported as standard by Gecko and Blink browsers.</p><p><b class="meta">For more details, see <a href="https://github.com/w3c/clreq/issues/248">this GitHub issue</a>, which is being used to track this gap.</b>
</p>
</section>
<section id="issue167_vertical_text">
<h4 id="x167-poor-level-of-support-for-vertical-form-controls"><a target="_blank" href="https://github.com/w3c/jlreq/issues/167">#167</a> Poor level of support for vertical form controls<a class="self-link" aria-label="§" href="#issue167_vertical_text"></a></h4>
<p><i class="meta">This issue is applicable to Chinese, Japanese, Korean, and Mongolian.</i></p><p>Handling of vertical text in forms is a major gap. Only the Firefox desktop browser does a good job of this. Other browsers fail resoundingly in terms of orienting form controls vertically and displaying text vertically inside them.</p><p><b class="meta">For more details, see <a href="https://github.com/w3c/clreq/issues/247">this GitHub issue</a>, which is being used to track this gap.</b>
</p>
</section>
</div>
</section>




<section id="bidi_text" class="na">
<h3 id="x2-2-bidirectional-text"><bdi class="secno">2.2 </bdi>Bidirectional text<a class="self-link" aria-label="§" href="#bidi_text"></a></h3>
<p id="prompt-bidi_text" class="status_prompt promptStub">If this script runs right-to-left, are there any issues when handling that? Is bidirectional text adequately supported? What about numbers and expressions? Do the Unicode bidi controls and HTML markup provide the support needed? Is isolation of directional runs problematic? <a href="https://www.w3.org/TR/typography/#bidi_text">See available information</a> or <a href="https://github.com/w3c/i18n-activity/issues?utf8=%E2%9C%93&amp;q=is%3Aissue%20is%3Aopen%20label%3Ai%3Abidi-text%20label%3Atype-info-request">check for currently needed data</a>.</p>

<div id="insert-bidi_text"></div>

</section>
</section>




<section id="h_characters_and_phrases">
<h2 id="x3-characters-and-phrases"><bdi class="secno">3. </bdi>Characters and phrases<a class="self-link" aria-label="§" href="#h_characters_and_phrases"></a></h2>
    
    
    
<section id="charset" class="ok">
<h3 id="x3-1-characters-encoding"><bdi class="secno">3.1 </bdi>Characters &amp; encoding<a class="self-link" aria-label="§" href="#charset"></a></h3>
<p id="prompt-charset" class="status_prompt promptStub">Are there any character repertoire issues preventing use of this script on the Web? Do variation selectors need attention? Are there any other encoding-related issues? <a href="https://www.w3.org/TR/typography/#charset">See available information</a> or <a href="https://github.com/w3c/i18n-activity/issues?utf8=%E2%9C%93&amp;q=is%3Aissue%20is%3Aopen%20label%3Ai%3Acharset%20label%3Atype-info-request">check for currently needed data</a>.</p>

<div id="insert-charset"></div>
</section>



<section id="fonts" class="tbd">
<h3 id="x3-2-fonts"><bdi class="secno">3.2 </bdi>Fonts<a class="self-link" aria-label="§" href="#fonts"></a></h3>
<p id="prompt-fonts" class="status_prompt promptStub">Do the standard fallback fonts used in browsers (eg. serif, sans-serif, cursive, etc.) match expectations? Are special font or OpenType features needed for this script that are not available?  <a href="https://www.w3.org/TR/typography/#fonts">See available information</a> or <a href="https://github.com/w3c/i18n-activity/issues?utf8=%E2%9C%93&amp;q=is%3Aissue%20is%3Aopen%20label%3Ai%3Afonts%20label%3Atype-info-request">check for currently needed data</a>.</p>


<div id="insert-fonts"></div>
</section>



<section id="font_style" class="tbd">
<h3 id="x3-3-font-styles-weight-etc"><bdi class="secno">3.3 </bdi>Font  styles, weight, etc<a class="self-link" aria-label="§" href="#font_style"></a></h3>
<p id="prompt-font_style" class="status_prompt promptStub">This covers ways of modifying the glyphs, such as for italicisation, bolding, oblique, etc. Do italic fonts lean in the right direction? Is synthesised italicisation problematic? Are there other problems relating to bolding or italicisation - perhaps relating to generalised assumptions of applicability? <a href="https://www.w3.org/TR/typography/#font_style">See available information</a> or <a href="https://github.com/w3c/i18n-activity/issues?utf8=%E2%9C%93&amp;q=is%3Aissue%20is%3Aopen%20label%3Ai%3Afont-style%20label%3Atype-info-request">check for currently needed data</a>.</p>


<div id="insert-font_style"></div>
</section>



<section id="glyphs" class="basic">
<h3 id="x3-4-glyph-shaping-and-positioning"><bdi class="secno">3.4 </bdi>Glyph shaping and positioning<a class="self-link" aria-label="§" href="#glyphs"></a></h3>
<p id="prompt-glyphs" class="status_prompt promptStub">Does the script in question require additional user control features to support alterations to the position or shape of glyphs, for example adjusting the distance between the base text and diacritics, or changing the glyphs used in a systematic way? Do you need to be able to compose/decompose conjuncts, or show characters that are otherwise hidden, etc? <a href="https://www.w3.org/TR/typography/#glyphs">See available information</a> or <a href="https://github.com/w3c/i18n-activity/issues?utf8=%E2%9C%93&amp;q=is%3Aissue%20is%3Aopen%20label%3Ai%3Aglyphs-diacritics%20label%3Atype-info-request">check for currently needed data</a>.</p>


<div id="insert-glyphs"><section id="issue182_glyphs">
<h4 id="x182-positioning-of-opening-brackets-at-line-head"><a target="_blank" href="https://github.com/w3c/jlreq/issues/182">#182</a> Positioning of opening brackets at line head<a class="self-link" aria-label="§" href="#issue182_glyphs"></a></h4>
<p>When starting a new line with opening brackets after forced line break, several options exist for amount of spacing before the opening brackets, as in <a href="https://www.w3.org/TR/2012/NOTE-jlreq-20120403/#positioning_of_opening_brackets_at_line_head">JLReq section 3.1.5</a>:</p><p><img src="images/74700677-a43f7800-5247-11ea-909f-aae95980522d.png" alt="image"></p><p>This is proposed in css-text-4 as text-spacing, not implemented yet in browsers.</p><p>(tests are proposed in i18n-tests as PR).
</p>
</section>
<section id="issue181_glyphs">
<h4 id="x181-positioning-of-consecutive-opening-brackets-closing-brackets-commas-full-stops-and-middle-dots"><a target="_blank" href="https://github.com/w3c/jlreq/issues/181">#181</a> Positioning of consecutive opening brackets, closing brackets, commas, full stops and middle dots<a class="self-link" aria-label="§" href="#issue181_glyphs"></a></h4>
<p>In Japanese text, spacing between consecutive punctuation are partly omitted as described in <a href="https://www.w3.org/TR/2012/NOTE-jlreq-20120403/#positioning_of_consecutive_opening_brackets_closing_brackets_comma_full_stops_and_middle_dots">JLReq section 3.1.4</a>, as follows:
<img src="images/74700364-976e5480-5246-11ea-8ef5-60a629912efc.png" alt="image"></p><p>This is implemented in css-text Level 4 text-spacing, not yet implemented in browsers.</p><p>(tests are proposed to i18n-tests, not yet reviewed by i18n WG nor merged)</p>
</section>
</div>
</section>



<section id="cursive" class="na">
<h3 id="x3-5-cursive-text"><bdi class="secno">3.5 </bdi>Cursive text<a class="self-link" aria-label="§" href="#cursive"></a></h3>
<p id="prompt-cursive" class="status_prompt promptStub">If this script is cursive (eg. Arabic, N’Ko, Syriac, etc), are there problems or needed features related to the handling of cursive text? Do cursive links break if parts of a word are marked up or styled? Do Unicode joiner and non-joiner characters behave as expected?   <a href="https://www.w3.org/TR/typography/#cursive">See available information</a> or <a href="https://github.com/w3c/i18n-activity/issues?utf8=%E2%9C%93&amp;q=is%3Aissue%20is%3Aopen%20label%3Ai%3Acursive%20label%3Atype-info-request">check for currently needed data</a>.</p>


<div id="insert-cursive"></div>
</section>



<section id="baselines" class="tbd">
<h3 id="x3-6-baselines-line-height-etc"><bdi class="secno">3.6 </bdi>Baselines, line-height, etc<a class="self-link" aria-label="§" href="#baselines"></a></h3>
<p id="prompt-baselines" class="status_prompt promptStub">Does the browser support  requirements for baseline alignment between mixed scripts and in general? <a href="https://www.w3.org/TR/typography/#baselines">See available information</a> or <a href="https://github.com/w3c/i18n-activity/issues?utf8=%E2%9C%93&amp;q=is%3Aissue%20is%3Aopen%20label%3Ai%3Abaselines%20label%3Atype-info-request">check for currently needed data</a>.</p>


<div id="insert-baselines"></div>
</section>




<section id="transforms" class="basic">
<h3 id="x3-7-transforming-characters"><bdi class="secno">3.7 </bdi>Transforming characters<a class="self-link" aria-label="§" href="#transforms"></a></h3>
<p id="prompt-transforms" class="status_prompt promptStub">Does your script need special text transforms that are not supported? Does your script convert letters to uppercase, capitalised and lowercase alternatives according to your typographic needs? Do you need to to convert between half-width and full-width presentation forms? <a href="https://www.w3.org/TR/typography/#transforms">See available information</a> or <a href="https://github.com/w3c/i18n-activity/issues?utf8=%E2%9C%93&amp;q=is%3Aissue%20is%3Aopen%20label%3Ai%3Atransforms%20label%3Atype-info-request">check for currently needed data</a>.</p>


<div id="insert-transforms"><section id="issue172_transforms">
<h4 id="x172-japanese-full-width-transforms-don-t-work"><a target="_blank" href="https://github.com/w3c/jlreq/issues/172">#172</a> Japanese full-width transforms don't work<a class="self-link" aria-label="§" href="#issue172_transforms"></a></h4>
<p><code class="kw" translate="no">text-transform: full-width</code> currently only works in Gecko. </p><p>Tests:  <a href="https://w3c.github.io/i18n-drafts/articles/vertical-text/index-data/upright-en.html" target="text">standard syntax</a> • <a href="https://w3c.github.io/i18n-drafts/articles/vertical-text/index-data/upright-en-pref.html" target="text">proprietary syntax</a>
More tests: <a href="https://w3c.github.io/jlreq/gap-analysis/tests/text-transform-fullwidth/text-transform-fullwidth-001">a-z</a>, <a href="https://w3c.github.io/jlreq/gap-analysis/tests/text-transform-fullwidth/text-transform-fullwidth-002">A-Z</a>, <a href="https://w3c.github.io/jlreq/gap-analysis/tests/text-transform-fullwidth/text-transform-fullwidth-003">punctuation</a>, <a href="https://w3c.github.io/jlreq/gap-analysis/tests/text-transform-fullwidth/text-transform-fullwidth-004">katakana</a>, <a href="https://w3c.github.io/jlreq/gap-analysis/tests/text-transform-fullwidth/text-transform-fullwidth-005">punctuation</a>, <a href="https://w3c.github.io/jlreq/gap-analysis/tests/text-transform-fullwidth/text-transform-fullwidth-006">symbols</a></p><p>Related browser bugs: 
<a href="https://bugs.chromium.org/p/chromium/issues/detail?id=684968">Chromium</a>
<a href="https://bugs.webkit.org/show_bug.cgi?id=143153">Webkit</a>
</p>
</section>
</div>
</section>




<section id="segmentation" class="tbd">
<h3 id="x3-8-grapheme-word-segmentation-selection"><bdi class="secno">3.8 </bdi>Grapheme/word segmentation &amp; selection<a class="self-link" aria-label="§" href="#segmentation"></a></h3>
<p id="prompt-segmentation" class="status_prompt promptStub">This is about how text is divided into graphemes, words, sentences, etc., and behaviour associated with that. Do Unicode grapheme clusters appropriately segment character units for your script? When you double- or triple-click on the text, is the expected range of characters highlighted? When you move through the text with the cursor, or backspace, etc. do you see the expected behaviour?  (Some of the answers to these questions may be picker up in other sections, such as line-breaking, or initial-letter styling.)   <a href="https://www.w3.org/TR/typography/#segmentation">See available information</a>  or <a href="https://github.com/w3c/i18n-activity/issues?utf8=%E2%9C%93&amp;q=is%3Aissue%20is%3Aopen%20label%3Ai%3Asegmentation%20label%3Atype-info-request">check for currently needed data</a>.</p>


<div id="insert-segmentation"></div>
</section>
 


<section id="punctuation_etc" class="tbd">
<h3 id="x3-9-inline-features-punctuation"><bdi class="secno">3.9 </bdi>Inline features &amp; punctuation<a class="self-link" aria-label="§" href="#punctuation_etc"></a></h3><p id="prompt-punctuation_etc" class="status_prompt promptStub">Are there specific problems related to punctuation or the interaction of the text with punctuation (for example separation of punctuation from previous text, but allowing no line break between)? Are there issues related to handling of abbreviation, ellipsis, or iteration? Are there problems related to bracketing information or demarcating things such as proper nouns, etc?   <a href="https://www.w3.org/TR/typography/#punctuation_etc">See available information</a>  or <a href="https://github.com/w3c/i18n-activity/issues?utf8=%E2%9C%93&amp;q=is%3Aissue%20is%3Aopen%20label%3Ai%3Apunctuation_etc%20label%3Atype-info-request">check for currently needed data</a>.</p>


<div id="insert-punctuation_etc"></div>
</section>
   
    
    
<section id="text_decoration" class="advanced">
<h3 id="x3-10-text-decoration"><bdi class="secno">3.10 </bdi>Text decoration<a class="self-link" aria-label="§" href="#text_decoration"></a></h3>
<p id="prompt-text_decoration" class="status_prompt promptStub">This is about  ways of marking text (see also specific sections dedicated to quotations and inline notes/annotations). Is it possible to express emphasis or highlight content as expected? Bold, italic and under-/over-lines are not always appropriate, and some scripts have their own unique ways of doing things, that are not in the Western tradition at all. Text delimiters mark certain items or sections off from the main text, such as book names in Chinese, quotations, head markers in Tibetan, etc, and often involve the use of punctuation. Is there any behaviour that isn't well supported, such as overlines for numeric digits in Syriac?    Are there issues about the positioning or use of underlines? Some aspects related to the drawing of lines alongside or through text involve local typographic considerations. Do underlines need to be broken in special ways for this script? Do you need support for additional line shapes or widths? Does the distance or position of the lines relative to the text need to vary in ways that are not achievable? Are lines correctly drawn relative to vertical text?   <a href="https://www.w3.org/TR/typography/#text_decoration">See available information</a>  or <a href="https://github.com/w3c/i18n-activity/issues?utf8=%E2%9C%93&amp;q=is%3Aissue%20is%3Aopen%20label%3Ai%3Atext-decoration%20label%3Atype-info-request">check for currently needed data</a>.</p>


<div id="insert-text_decoration"><section id="issue173_text_decoration">
<h4 id="x173-boten-marks-lack-wide-support"><a target="_blank" href="https://github.com/w3c/jlreq/issues/173">#173</a> Boten marks lack wide support<a class="self-link" aria-label="§" href="#issue173_text_decoration"></a></h4>
<p>There are <a href="https://w3c.github.io/i18n-tests/results/emphasis-marks">tests for boten mark support</a> that show that they are not supported by <span class="fail">Chrome</span> 63.0.3239.132 or <span class="fail">Edge</span>, but they are supported by <span class="pass">Firefox</span> 58.0 and <span class="pass">Safari</span> 11.0.3.</p><p>The expected behaviour for basic support of boten marks is <a href="https://drafts.csswg.org/css-text-decor-3/#emphasis-marks">specified in CSS</a>.</p><p>Given that there are alternative ways of showing emphasis, and although there are already two implementations, I  mark this as an advanced need.</p><p>Additional requirements arose while the text was being written for CSS. They relate to text that is annotated with ruby at the same time as annotation marks. The conclusions were:</p><p></p><ol>
<li> Emphasis marks go outside ruby.</li>
<li>If ruby only spans part of the emphasised word, emphasis marks stay as close as possible to the base.</li>
<li>Where a ruby annotation is hidden or empty, the emphasis marks should continue at the same height.</li>
</ol><p></p><p>JLReq also requires that emphasis marks not appear over commas, full stops and brackets.</p><p>There are currently no tests for these behaviours, and no requirements in jlreq for the former (with ruby). <strong>Need to take a closer look.</strong></p><p>JLReq calls out the usual practise of using sesame shaped boten for vertical text, and bullets for horizontal. Controls for this exist in CSS, and tests show that it is supported by the browsers that support boten.</p><p>The default side for boten is to the right of vertical lines and above horizontal lines, according to JLReq. CSS controls allow this positioning to be set by the author, and in fact it is the default in both browsers that support boten for text where a lang tag identifies it as Japanese.</p>
</section>
</div>
</section>



<section id="quotations" class="advanced">
<h3 id="x3-11-quotations"><bdi class="secno">3.11 </bdi>Quotations<a class="self-link" aria-label="§" href="#quotations"></a></h3>
<p id="prompt-quotations" class="status_prompt promptStub">Are there any issues when dealing with quotations marks, especially when nested? Should block quotes be indented or handled specially?   <a href="https://www.w3.org/TR/typography/#quotations">See available information</a>  or <a href="https://github.com/w3c/i18n-activity/issues?utf8=%E2%9C%93&amp;q=is%3Aissue%20is%3Aopen%20label%3Ai%3Aquotations%20label%3Atype-info-request">check for currently needed data</a>.</p>
	
	
<div id="insert-quotations"><section id="issue174_quotations">
<h4 id="x174-q-element-produces-incorrect-quotation-marks-when-language-changes"><a target="_blank" href="https://github.com/w3c/jlreq/issues/174">#174</a> q element produces incorrect quotation marks when language changes<a class="self-link" aria-label="§" href="#issue174_quotations"></a></h4>
<p><i class="meta">This issue is common across all languages that use the q element.</i></p><p>When a Japanese page contains a quotation in another language, the quotation marks used around that quotation (and inside it for embedded quotes) should be the Japanese ones – not those of the language of the quotation.</p><p>Currently, if the language of the quotation is declared on the <code translate="no">q</code> tag in HTML using the <code translate="no">lang</code> attribute, browsers instead set the quotation marks based on the language of the quote.</p><p>For example, if English text is quoted in a Japanese sentence surrounded by just <code translate="no">&lt;q&gt;</code>, the quotation marks will be correct:</p><p><span lang="ka">いち 「two 『three』」</span></p><p>However, if <code translate="no">lang="en"</code> is added to the <code translate="no">q</code> tag, the result becomes:</p><p><span lang="el">いち  “two ‘three’”</span></p><p>Here is <a href="https://w3c.github.io/i18n-tests/exploratory/vanilla/?text=%3Cdiv%3E%E3%81%84%E3%81%A1%20%3Cq%3Etwo%20%3Cq%3Ethree%3C%2Fq%3E%3C%2Fq%3E%3C%2Fdiv%3E%0A%3Cdiv%3E%E3%81%84%E3%81%A1%20%3Cq%20lang%3D%22en%22%3Etwo%20%3Cq%3Ethree%3C%2Fq%3E%3C%2Fq%3E%3C%2Fdiv%3E%0A&amp;lang=ja&amp;fontSize=45&amp;width=560&amp;height=159">a test</a>.    There are also tests and results <a href="https://w3c.github.io/i18n-tests/results/the-q-element.html#ml_nesting">in the i18n test suite</a>.</p><p><b class="meta">For more details, see <a href="https://github.com/w3c/eurlreq/issues/22">this GitHub issue</a>, which is being used to track this gap.</b></p>
</section>
</div>
</section>


<section id="inline_notes" class="basic">
<h3 id="x3-12-inline-notes-annotations"><bdi class="secno">3.12 </bdi>Inline notes &amp; annotations<a class="self-link" aria-label="§" href="#inline_notes"></a></h3>
<p id="prompt-inline_notes" class="status_prompt promptStub">The ruby spec currently specifies an initial subset of requirements for fine-tuning the typography of phonetic and semantic annotations of East Asian text, including furigana, pinyin and zhuyin fuhao systems.  Is is adequate for what it sets out to do?  What other controls will be needed in the future? What about other types of inline annotation, such as warichu? (For referent-type notes such as footnotes, see below.)         <a href="https://www.w3.org/TR/typography/#inline_notes">See available information</a>  or <a href="https://github.com/w3c/i18n-activity/issues?utf8=%E2%9C%93&amp;q=is%3Aissue%20is%3Aopen%20label%3Ai%3Ainline-notes%20label%3Atype-info-request">check for currently needed data</a>.</p>


<div id="insert-inline_notes"><section id="issue255_inline_notes">
<h4 id="x255-in-page-search-fails-on-ruby-annotated-text"><a target="_blank" href="https://github.com/w3c/jlreq/issues/255">#255</a> In-page search fails on ruby-annotated text<a class="self-link" aria-label="§" href="#issue255_inline_notes"></a></h4>
<p><i class="meta">This issue is applicable to all languages that use ruby markup (Chinese, Japanese, Mongolian, Korean).</i></p><p>If text is marked up for ruby, using the interleaved markup approach currently required by the HTML spec, a browser's in-page search no longer recognises the text.  For example, if you search for 東京 on a page that has this markup:</p><p><code>&lt;ruby&gt;&lt;rb&gt;東&lt;rt&gt;とう&lt;rb&gt;京&lt;rt&gt;きょう&lt;/ruby&gt;</code></p><p>the search will fail to locate the word.</p><p>Note that a tabular arrangement of markup, such as </p><p><code>&lt;ruby&gt;&lt;rb&gt;東&lt;rb&gt;京&lt;rt&gt;とう&lt;rt&gt;きょう&lt;/ruby&gt;</code></p><p>would work fine but, although it is parsed correctly,  this tabular markup is not displayed correctly by Blink or Webkit currently, and therefore the HTML specification has obsoleted the <code translate="no">rb</code> and <code translate="no">rtc</code> elements.</p><p><b class="subhead">Specs:</b>
The HTML specification currently blocks the workaround (which is to use tabular markup), but a solution needs to also be found for the interleaved markup.</p><p>
<b class="subhead">Tests &amp; results:</b>
<i>Interactive test</i>, <a href="https://github.com/w3c/character_phrase_tests/issues/44">In page search will find text that has ruby annotations in interleaved markup</a><br>
<span class="fail">Gecko</span>, <span class="fail">Blink</span>, and <span class="fail">Webkit</span> browsers all fail to recognise strings when they have ruby text.</p><p><i>Interactive test</i>, <a href="https://github.com/w3c/character_phrase_tests/issues/45">In page search will find text that has ruby annotations in tabular markup</a><br>
<span class="pass">Gecko</span>, <span class="pass">Blink</span>, and <span class="pass">Webkit</span> browsers all recognise strings when they have ruby text arranged in tabular format, however support for that arrangement was removed from the HTML spec because currently only Gecko and Amazon have browsers that display the results correctly.</p><p></p><p><b class="subhead">Browser bug reports:</b>
<a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1699599">Gecko</a> • <a href="https://bugs.chromium.org/p/chromium/issues/detail?id=1189963">Blink</a> • <a href="https://bugs.webkit.org/show_bug.cgi?id=223493">Webkit</a></p><p></p><p><b class="subhead">Priority:</b>
This is an obstacle to basic interaction with web pages, especially while the HTML spec blocks the use of tabular markup.</p>
</section>
<section id="issue177_inline_notes">
<h4 id="x177-ruby-alignment-and-other-styling-unavailable"><a target="_blank" href="https://github.com/w3c/jlreq/issues/177">#177</a> Ruby alignment and other styling unavailable<a class="self-link" aria-label="§" href="#issue177_inline_notes"></a></h4>
<p>For background information read <a href="https://w3c.github.io/i18n-drafts/articles/ruby/styling.en.html#alignment">Aligning annotations and bases</a>.</p><p>Fine control in HTML over the placement of ruby annotations relative to the base require the availability of the CSS property <code class="kw" translate="no">ruby-align</code>. This only works in <span class="pass">Firefox</span>, and sometimes in <span class="partial">Edge</span> with proprietary syntax. It doesn't work for <span class="fail">Chrome</span> or <span class="fail">Safari</span>. See <a href="https://w3c.github.io/i18n-tests/results/css-ruby#ruby_align">results for major browsers</a>.</p><p>The impact of this is probably more important for advanced typographic layout.</p>
</section>
<section id="issue176_inline_notes">
<h4 id="x176-double-sided-ruby-not-displayed-correctly"><a target="_blank" href="https://github.com/w3c/jlreq/issues/176">#176</a> Double-sided ruby not displayed correctly<a class="self-link" aria-label="§" href="#issue176_inline_notes"></a></h4>
<p>In order to get double-sided ruby to appear on either side of the base text in HTML, you need the CSS <code class="kw" translate="no">ruby-position</code> property to work with the value <code class="kw" translate="no">under</code>. It currently works per the standard with <span class="pass">Gecko</span> and <span class="partial">Blink</span>, but doesn't work with <span class="partial">Webkit</span> (or <span class="fail">EdgeHTML</span>). It does work in Webkit with the proprietary <code class="kw" translate="no"> -webkit</code> prefix and value <code class="kw" translate="no"> after</code> in <span class="partial">Webkit</span> (but doesn't work with <span class="fail">EdgeHTML</span>).</p><p>See test results for <a href="https://w3c.github.io/i18n-tests/results/css-ruby#ruby_position">standard syntax</a> and <a href="https://w3c.github.io/i18n-tests/results/css-ruby#ruby_position_prop">proprietary syntax</a>.</p><p>Try <a href="https://w3c.github.io/i18n-tests/exploratory/inline_notes/int-ruby?lang=ja&amp;fontSize=60&amp;width=400&amp;rubyPosition=over&amp;rubyAlign=space-around&amp;rubyMerge=separate&amp;height=400&amp;text=%3Cruby%3E%3Crb%20lang%3D%22ja%22%3E%E6%97%A5%3C%2Frb%3E%3Crt%3E%E3%81%AB%3C%2Frt%3E%3Crb%20lang%3D%22ja%22%3E%E6%9C%AC%3C%2Frb%3E%3Crt%3E%E3%81%BB%E3%82%93%3C%2Frt%3E%3Crb%20lang%3D%22ja%22%3E%E8%AA%9E%3C%2Frb%3E%3Crt%3E%E3%81%94%3C%2Frt%3E%3C%2Fruby%3E">interactive tests</a>.</p><p>Double-sided ruby doesn't appear often in Japanese text, but it is used, and should be available to content authors.</p><p>Related browser bugs:
<a href="https://bugs.chromium.org/p/chromium/issues/detail?id=196690">Chromium</a>
<a href="https://bugs.webkit.org/show_bug.cgi?id=141420">Webkit</a>
<a href="https://bugs.webkit.org/show_bug.cgi?id=151306">Webkit</a></p><p></p>
</section>
<section id="issue175_inline_notes">
<h4 id="x175-tabular-markup-not-supported-for-ruby"><a target="_blank" href="https://github.com/w3c/jlreq/issues/175">#175</a> Tabular markup not supported for ruby<a class="self-link" aria-label="§" href="#issue175_inline_notes"></a></h4>
<p><i class="meta">This issue is applicable to all languages using ruby annotations (Japanese, Chinese, Mongolian, Korean).</i></p><p>The basic pattern of 'tabular' markup is <code>ruby-base ruby-base ... ruby-text ruby-text ...</code>. An advantage to this approach is that it enables you to style the ruby text to appear inline in such a way that all the ruby text for a word follows that word together. Inline styling can be useful in space-constrained situations, where it would be too difficult to read small ruby characters. <a href="https://w3c.github.io/i18n-drafts/articles/ruby/markup.en.html#tabular">Read more</a>.</p><p>This also makes certain applications of double-sided ruby impossible when the ruby on each side of the base spans a different set of base characters.</p><p>When text is marked up in mono-ruby way, searching will not work well. If you have the following markup</p><p><code>&lt;p&gt;&lt;ruby&gt;漢&lt;rt&gt;かん&lt;/rt&gt;字&lt;rt&gt;じ&lt;/rt&gt;&lt;/ruby&gt;&lt;/p&gt;</code></p><p>and search for the base text "漢字" in a browser, you will not get a result. Tabular markup could solve this problem. (See https://github.com/w3c/i18n-issues/issues/2 for a similar report raised by Japanese &amp; Chinese users.)</p><p>
<b class="subhead">Specs:</b>
<a href="https://github.com/whatwg/html/issues/1771">issue 1771 rb and rtc element should be removed from the list of obsolete features</a> Open.<br>
<a href="https://html.spec.whatwg.org/multipage/text-level-semantics.html#the-ruby-element">html</a> has actually removed markup for <code translate="no">rb</code> and <code translate="no">rtc</code> elements, which would be needed to make this work.  The parser, however, supports the use of the markup still.<br>
<a href="https://drafts.csswg.org/css-ruby-1/">css-ruby-1</a> Describes how the tabular approach will work for CSS.</p><p>
<b class="subhead">Tests &amp; results:</b>
<i>i18n test suite</i>, <a href="https://www.w3.org/International/i18n-tests/results/ruby-html">HTML5, the ruby element and its children</a><br>
<span class="pass">Gecko</span> supports display of ruby using the tabular model. <span class="fail">Blink</span>, and <span class="fail">Webkit</span> do not correctly support display. However, all browsers recognise the <code translate="no">rb</code> and <code translate="no">rtc</code> elements, and allow them to be styled or manipulated using scripting.</p><p>Kindle's ePub implementation also implements the tabular model, although not <code translate="no">rtc</code>.</p><p>
<b class="subhead">Browser bug reports:</b>
<a href="url">Gecko</a> • <a href="url">Blink</a> • <a href="url">Webkit</a></p><p>
<b class="subhead">Priority:</b>
The limitations created by the lack of the tabular model are all basic in nature.  None more so that the impairment for searching, since browsers have not been incentivised to fix that in any other way. The obsoletion of the <code translate="no">rb</code> and <code translate="no">rtc</code> elements by the HTML spec runs the risk that browser engines are not implementing the tabular model. 
</p>
</section>
</div>
</section>



<section id="data_formats" class="tbd">
<h3 id="x3-13-data-formats-numbers"><bdi class="secno">3.13 </bdi>Data formats &amp; numbers<a class="self-link" aria-label="§" href="#data_formats"></a></h3>
<p id="prompt-data_formats" class="status_prompt promptStub">If  the script has its own set of number digits, are there any issues in how they are used? Does the script or language use special format patterns that are problematic (eg. 12,34,000 in India)? What about date/time formats and selection - and are non-Gregorian calendars needed?  Do percent signs and other symbols associated with number work correctly, and do numbers need special decorations, (like in Ethiopic or Syriac)? How about the management of personal names, addresses, etc. in web pages: are there issues?        <a href="https://www.w3.org/TR/typography/#data_formats">See available information</a>  or <a href="https://github.com/w3c/i18n-activity/issues?utf8=%E2%9C%93&amp;q=is%3Aissue%20is%3Aopen%20label%3Ai%3Adata-formats%20label%3Atype-info-request">check for currently needed data</a>.</p>


<div id="insert-data_formats"></div>
</section>
</section>






<section id="h_lines_and_paragraphs">
<h2 id="x4-lines-and-paragraphs"><bdi class="secno">4. </bdi>Lines and Paragraphs<a class="self-link" aria-label="§" href="#h_lines_and_paragraphs"></a></h2>

 
<section id="line_breaking" class="tbd">
<h3 id="x4-1-line-breaking"><bdi class="secno">4.1 </bdi>Line breaking<a class="self-link" aria-label="§" href="#line_breaking"></a></h3>
<p id="prompt-line_breaking" class="status_prompt promptStub">Does the browser capture the rules about the way text in your script wraps when it hits the end of a line? Does line-breaking wrap whole 'words' at a time, or characters, or something else (such as syllables in Tibetan and Javanese)?  What characters should not appear at the end or start of a line, and what should be done to prevent that?         <a href="https://www.w3.org/TR/typography/#line_breaking">See available information</a>  or <a href="https://github.com/w3c/i18n-activity/issues?utf8=%E2%9C%93&amp;q=is%3Aissue%20is%3Aopen%20label%3Ai%3Aline-breaking%20label%3Atype-info-request">check for currently needed data</a>.</p>


<div id="insert-line_breaking"></div>
</section>



<section id="hyphenation" class="na">
<h3 id="x4-2-hyphenation"><bdi class="secno">4.2 </bdi>Hyphenation<a class="self-link" aria-label="§" href="#hyphenation"></a></h3>
<p id="prompt-hyphenation" class="status_prompt promptStub">Is hyphenation used for your script, or something else? If hyphenation is used, does it work as expected? (Note, this is about line-end hyphenation when text is wrapped, rather than use of the hyphen and related characters as punctuation marks.)         <a href="https://www.w3.org/TR/typography/#hyphenation">See available information</a>  or <a href="https://github.com/w3c/i18n-activity/issues?utf8=%E2%9C%93&amp;q=is%3Aissue%20is%3Aopen%20label%3Ai%3Ahyphenation%20label%3Atype-info-request">check for currently needed data</a>.</p>


<div id="insert-hyphenation"></div>
</section>



<section id="justification" class="tbd">
<h3 id="x4-3-text-alignment-justification"><bdi class="secno">4.3 </bdi>Text alignment &amp; justification<a class="self-link" aria-label="§" href="#justification"></a></h3>
<p id="prompt-justification" class="status_prompt promptStub">When text in a paragraph needs to have flush lines down both sides, does it follow the rules for your script? Does the script need assistance to conform to a grid pattern? Does your script allow punctuation to hang outside the text box at the start or end of a line? Where adjustments are need to make a line flush, how is that done? Do you shrink/stretch space between words and/or letters? Are word baselines stretched, as in Arabic? What about paragraph indents, or the need for logical alignment keywords, such as start/end, rather than left/right?         <a href="https://www.w3.org/TR/typography/#justification">See available information</a>  or <a href="https://github.com/w3c/i18n-activity/issues?utf8=%E2%9C%93&amp;q=is%3Aissue%20is%3Aopen%20label%3Ai%3Ajustification%20label%3Atype-info-request">check for currently needed data</a>.</p>


<div id="insert-justification"></div>
</section>



<section id="spacing" class="advanced">
<h3 id="x4-4-letter-spacing"><bdi class="secno">4.4 </bdi>Letter spacing<a class="self-link" aria-label="§" href="#spacing"></a></h3>
<p id="prompt-spacing" class="status_prompt promptStub">Some scripts create emphasis or other effects by spacing out the words, letters or syllables in a word. Are there requirements for this script/language that are unsupported? (For justification related spacing, see below.)         <a href="https://www.w3.org/TR/typography/#spacing">See available information</a>  or <a href="https://github.com/w3c/i18n-activity/issues?utf8=%E2%9C%93&amp;q=is%3Aissue%20is%3Aopen%20label%3Ai%3Aspacing%20label%3Atype-info-request">check for currently needed data</a>.</p>



<div id="insert-spacing"><section id="issue265_spacing">
<h4 id="x265-browsers-apply-extraneous-spaces-when-letter-spacing"><a target="_blank" href="https://github.com/w3c/jlreq/issues/265">#265</a> Browsers apply extraneous spaces when letter-spacing<a class="self-link" aria-label="§" href="#issue265_spacing"></a></h4>
<p><i class="meta">This issue applies to all languages that use letter-spacing.</i></p><p>Currently browsers that apply letter-spacing do so by adding a space after every letter in the text that is tracked.  This results in a superfluous space at the end of the range, which creates an inappropriate gap before the following text.  Letter spacing at the end of a line makes the line look misaligned in justified or right-justified text. It also has implications for text that has other styling, such as an outline or a coloured background, at the same time as being stretched.  </p><p><b class="meta">This issue is described in more detail and tracked <a href="https://github.com/w3c/eurlreq/issues/23">here</a>.</b></p><p></p><p></p>
</section>
</div>
</section>



<section id="lists" class="basic">
<h3 id="x4-5-lists-counters-etc"><bdi class="secno">4.5 </bdi>Lists, counters, etc.<a class="self-link" aria-label="§" href="#lists"></a></h3>
<p id="prompt-lists" class="status_prompt promptStub">The CSS Counter Styles specification describes a limited set of simple and complex styles for counters to be used in list numbering, chapter heading numbering, etc.The rules plus more counter styles (totalling around 120 for over 30 scripts) are listed in the document <a href="https://www.w3.org/TR/predefined-counter-styles/">Ready-made Counter Styles</a>. Do these cover your needs?  Are the details correct? Are there other aspects related to counters and lists that need to be addressed?         <a href="https://www.w3.org/TR/typography/#lists">See available information</a>  or <a href="https://github.com/w3c/i18n-activity/issues?utf8=%E2%9C%93&amp;q=is%3Aissue%20is%3Aopen%20label%3Ai%3Alists%20label%3Atype-info-request">check for currently needed data</a>.</p>


<div id="insert-lists"><section id="issue178_lists">
<h4 id="x178-local-counter-styles-not-supported"><a target="_blank" href="https://github.com/w3c/jlreq/issues/178">#178</a> Local counter styles not supported<a class="self-link" aria-label="§" href="#issue178_lists"></a></h4>
<p><i class="meta">Customisable counters are needed for many languages.</i></p><p>There is no way for users to create local counter styles that are not built in to the browser, and users also often want to tweak the counter style in some way (esp. the prefix/suffix).</p><p>For Japanese, this means that a number of predefined counter styles in the <a href="https://drafts.csswg.org/css-counter-styles/">CSS Counter Styles</a> spec are not widely supported by browsers, or use a different separator from that specified. Because the custom mechanism of the Counter Styles spec is not supported by browsers other than Firefox, users are unable to fix this for themselves.</p><p><b class="meta">For more details, see <a href="https://github.com/w3c/iip/issues/93">this GitHub issue</a>, which is being used to track this gap.</b></p><p>The following are additional items of Japanese-specific information.</p><p><strong>Tests &amp; results:</strong>
i18n test suite, <a href="https://w3c.github.io/i18n-tests/results/counter-styles#basics">Basic tests for support of @counter-styles</a>
i18n test suite, <a href="https://w3c.github.io/i18n-tests/results/custom-counter-styles#kana">Tests for hiragana/katakana styles</a>
i18n test suite, <a href="https://w3c.github.io/i18n-tests/results/custom-counter-styles#chinese">Tests for kanji character styles</a></p><p><strong>Browser bug reports:</strong></p><p><a href="https://bugs.chromium.org/p/chromium/issues/detail?id=687225">Chromium</a>
<a href="https://bugs.webkit.org/show_bug.cgi?id=167645">WebKit</a></p>
</section>
<section id="issue170_lists">
<h4 id="x170-unable-to-make-list-counters-stand-upright-in-vertical-text-0"><a target="_blank" href="https://github.com/w3c/jlreq/issues/170">#170</a> Unable to make list counters stand upright in vertical text<a class="self-link" aria-label="§" href="#issue170_lists"></a></h4>
<p>A common way to orient counters for lists in vertical text is to have an upright number with a dot alongside it.<a href="https://w3c.github.io/i18n-drafts/articles/vertical-text/index-data/tcu-all-pref.html" target="text"></a></p><p><img src="images/73653505-33159780-4681-11ea-9b21-0c036e0a4d45.png" alt="vertical-lists"></p><p>The expected way to achieve this in HTML would be to use the following CSS: <code>li::marker { text-combine-upright: all; }</code>, however this cannot be used because browsers don't support <code class="kw" translate="no">text-combine-upright</code>.  </p><p>Try <a href="https://w3c.github.io/i18n-tests/exploratory/lists/int-lists?text=%3Col%3E%3Cli%3Eone%3C%2Fli%3E%3Cli%3Etwo%3C%2Fli%3E%3Cli%3Ethree%3C%2Fli%3E%3C%2Fol%3E%0A&amp;fontSize=36&amp;height=250&amp;color=red&amp;textCombineUpright=all&amp;writingMode=vertical-rl">this test</a></p><p>A workaround might be to use fullwidth characters for counters, such as ①, ②, ③ etc., but use of such a workaround requires the availability of custom built counter styles, and only Firefox currently supports the CSS Counter Styles specification. So that doesn't work either. </p><p>Try  <a href="https://w3c.github.io/i18n-drafts/articles/vertical-text/index-data/korean-list-counterstyles.html" target="text">this test</a> </p><p>It is a significant nuisance for content authoring to not be able to produce upright counters for lists. This is a very common approach to numbering lists in vertical text, and should be possible on the Web.</p><p>Browser bugs raised:
<a href="https://bugs.chromium.org/p/chromium/issues/detail?id=457718">Chromium</a>
<a href="https://bugs.webkit.org/show_bug.cgi?id=150821">Webkit</a>
<a href="https://bugs.webkit.org/show_bug.cgi?id=204163">Webkit</a>
<a href="https://bugzilla.mozilla.org/show_bug.cgi?id=1604328">Mozilla</a>
</p>
</section>
</div>
</section>



<section id="initials" class="tbd">
<h3 id="x4-6-styling-initials"><bdi class="secno">4.6 </bdi>Styling initials<a class="self-link" aria-label="§" href="#initials"></a></h3>
<p id="prompt-initials" class="status_prompt promptStub">Does the browser or ereader correctly handle special styling of the initial letter of a line or paragraph, such as for drop caps or similar? How about  the size relationship between the large letter and the lines alongide? where does the large letter anchor relative to the lines alongside? is it normal to include initial quote marks in the large letter? is the large letter really a syllable? etc. Are all of these things working as expected?         <a href="https://www.w3.org/TR/typography/#initials">See available information</a>  or <a href="https://github.com/w3c/i18n-activity/issues?utf8=%E2%9C%93&amp;q=is%3Aissue%20is%3Aopen%20label%3Ai%3Ainitials%20label%3Atype-info-request">check for currently needed data</a>.</p>


<div id="insert-initials"></div>
</section>
</section>







<section id="h_pages">
<h2 id="x5-page-book-layout"><bdi class="secno">5. </bdi>Page &amp; book layout<a class="self-link" aria-label="§" href="#h_pages"></a></h2>

<section id="page_layout" class="basic">
<h3 id="x5-1-general-page-layout-progression"><bdi class="secno">5.1 </bdi>General page layout &amp; progression<a class="self-link" aria-label="§" href="#page_layout"></a></h3>
<p id="prompt-page_layout" class="status_prompt promptStub">How are the main text area and ancilliary areas positioned and defined? Are there any special requirements here, such as dimensions in characters for the Japanese kihon hanmen? The book cover for scripts that are read right-to-left scripts is on the right of the spine, rather than the left. Is that provided for? When content can flow vertically and to the left or right, how do you specify the location of objects, text, etc. relative to the flow? For example, keywords 'left' and 'right' are likely to need to be reversed for pages written in English and page written in Arabic. Do tables and grid layouts work as expected? How do columns work in vertical text? Can you mix block of vertical and horizontal text correctly? Does text scroll in the expected direction? Other topics that belong here include any local requirements for things such as printer marks, tables of contents and indexes.        <a href="https://www.w3.org/TR/typography/#page_layout">See available information</a>  or <a href="https://github.com/w3c/i18n-activity/issues?utf8=%E2%9C%93&amp;q=is%3Aissue%20is%3Aopen%20label%3Ai%3Apage-layout%20label%3Atype-info-request">check for currently needed data</a>.</p>


<div id="insert-page_layout"><section id="issue171_page_layout">
<h4 id="x171-table-cells-don-t-handle-vertical-direction-properly-0"><a target="_blank" href="https://github.com/w3c/jlreq/issues/171">#171</a> Table cells don't handle vertical direction properly<a class="self-link" aria-label="§" href="#issue171_page_layout"></a></h4>
<p>If you place the <code class="kw" translate="no">writing-mode</code> property with a value of <code class="kw" translate="no">vertical-rl</code> on an individual table cell, you would expect the text in that cell to be displayed vertically. This works as expected in <span class="pass">Gecko</span> browsers, as well as in <span class="pass">legacy Edge</span> and <span class="pass">Internet Explorer</span>. However, <span class="fail">Blink</span> browsers (Chrome, Edge, etc) don't apply vertical writing mode, and <span class="fail">Webkit</span> browsers, leave the text horizontal but rotate the Japanese characters to the left.</p><p>See <a href="https://w3c.github.io/i18n-tests/exploratory/vanilla/?text=%3Ctable%20style%3D%22border%3A1px%20solid%20red%3Bmargin%3A1em%3B%22%3E%3Ctr%3E%3Ctd%20style%3D%22writing-mode%3Avertical-rl%3B%22%3E%E7%B8%A6%E6%9B%B8%E3%81%8D%3C%2Ftd%3E%3Ctd%3E%E6%A8%AA%E6%9B%B8%E3%81%8D%3C%2Ftd%3E%3C%2Ftr%3E%3Ctr%3E%3Ctd%3E%E6%A8%AA%E6%9B%B8%E3%81%8D%3C%2Ftd%3E%3Ctd%20style%3D%22writing-mode%3Avertical-rl%3Bheight%3A5em%22%3E%E7%B8%A6%E6%9B%B8%E3%81%8D%3C%2Ftd%3E%3C%2Ftr%3E%3C%2Ftable%3E&amp;lang=ja&amp;fontSize=36&amp;width=500&amp;height=500">a test</a>.</p><p>Wrapping the text to be made vertical in a <code translate="no">span</code> inside the cell, and applying <code translate="no">writing-mode:vertical-rl</code> to that gives the expected result in Blink, but in Safari it's necessary to also apply a height setting for the text to display properly.</p><p>See <a href="https://w3c.github.io/i18n-tests/exploratory/vanilla/?text=%3Ctable%20style%3D%22border%3A1px%20solid%20red%3Bmargin%3A1em%3B%22%3E%3Ctr%3E%3Ctd%3E%3Cspan%20style%3D%22writing-mode%3Avertical-rl%3B%22%3E%E7%B8%A6%E6%9B%B8%E3%81%8D%3C%2Fspan%3E%3C%2Ftd%3E%3Ctd%3E%E6%A8%AA%E6%9B%B8%E3%81%8D%3C%2Ftd%3E%3C%2Ftr%3E%3Ctr%3E%3Ctd%3E%E6%A8%AA%E6%9B%B8%E3%81%8D%3C%2Ftd%3E%3Ctd%3E%3Cspan%20style%3D%22writing-mode%3Avertical-rl%3Bheight%3A5em%3B%22%3E%E7%B8%A6%E6%9B%B8%E3%81%8D%3C%2Fspan%3E%3C%2Ftd%3E%3C%2Ftr%3E%3C%2Ftable%3E&amp;lang=ja&amp;fontSize=36&amp;width=500&amp;height=500">a test for span</a>.</p><p>Browser bugs raised: 
<a href="https://bugs.chromium.org/p/chromium/issues/detail?id=409155">Chromium</a> 
<a href="https://bugs.webkit.org/show_bug.cgi?id=65917">Webkit</a></p>
</section>
</div>
</section>



<section id="footnotes_etc" class="tbd">
<h3 id="x5-2-footnotes-endnotes-etc"><bdi class="secno">5.2 </bdi>Footnotes, endnotes, etc.<a class="self-link" aria-label="§" href="#footnotes_etc"></a></h3>
<p id="prompt-footnotes_etc" class="status_prompt promptStub">Does your script have special requirements for footnotes, endnotes or other necessary annotations of this kind in the way needed for your culture? (There is a section above for purely inline annotations, such as ruby or warichu. This section is more about annotation systems that separate the reference marks and the content of the notes.)         <a href="https://www.w3.org/TR/typography/#footnotes_etc">See available information</a>  or <a href="https://github.com/w3c/i18n-activity/issues?utf8=%E2%9C%93&amp;q=is%3Aissue%20is%3Aopen%20label%3Ai%3Afootnotes-etc%20label%3Atype-info-request">check for currently needed data</a>.</p>


<div id="insert-footnotes_etc"></div>
</section>



<section id="headers_footers" class="tbd">
<h3 id="x5-3-page-headers-footers-etc"><bdi class="secno">5.3 </bdi>Page headers, footers, etc.<a class="self-link" aria-label="§" href="#headers_footers"></a></h3>
<p id="prompt-headers_footers" class="status_prompt promptStub">Are there special conventions for page numbering, or the way that running headers and the like are handled?         <a href="https://www.w3.org/TR/typography/#headers_footers">See available information</a>  or <a href="https://github.com/w3c/i18n-activity/issues?utf8=%E2%9C%93&amp;q=is%3Aissue%20is%3Aopen%20label%3Ai%3Aheaders-footers%20label%3Atype-info-request">check for currently needed data</a>.</p>



<div id="insert-headers_footers"></div>
</section>



<section id="interaction" class="basic">
<h3 id="x5-4-forms-user-interaction"><bdi class="secno">5.4 </bdi>Forms &amp; user interaction<a class="self-link" aria-label="§" href="#interaction"></a></h3>
<p id="prompt-interaction" class="status_prompt promptStub">Are vertical form controls well supported? In right-to-left scripts, is it possible to set the base direction for a form field? Is the scroll bar on the correct side? etc.         <a href="https://www.w3.org/TR/typography/#interaction">See available information</a>  or <a href="https://github.com/w3c/i18n-activity/issues?utf8=%E2%9C%93&amp;q=is%3Aissue%20is%3Aopen%20label%3Ai%3Ainteraction%20label%3Atype-info-request">check for currently needed data</a>.</p>


<div id="insert-interaction"><section id="issue167_interaction">
<h4 id="x167-poor-level-of-support-for-vertical-form-controls-0"><a target="_blank" href="https://github.com/w3c/jlreq/issues/167">#167</a> Poor level of support for vertical form controls<a class="self-link" aria-label="§" href="#issue167_interaction"></a></h4>
<p><i class="meta">This issue is applicable to Chinese, Japanese, Korean, and Mongolian.</i></p><p>Handling of vertical text in forms is a major gap. Only the Firefox desktop browser does a good job of this. Other browsers fail resoundingly in terms of orienting form controls vertically and displaying text vertically inside them.</p><p><b class="meta">For more details, see <a href="https://github.com/w3c/clreq/issues/247">this GitHub issue</a>, which is being used to track this gap.</b>
</p>
</section>
</div>
</section>
</section>






<section id="h_other">
<h2 id="x6-other"><bdi class="secno">6. </bdi>Other<a class="self-link" aria-label="§" href="#h_other"></a></h2>


<section id="culturespecific" class="tbd">
    <h3 id="x6-1-culture-specific-features"><bdi class="secno">6.1 </bdi>Culture-specific features<a class="self-link" aria-label="§" href="#culturespecific"></a></h3>
    <p class="status_prompt">Sometimes a script or language does things that are not common outside of its sphere of influence. This is a loose bag of additional items that weren't previously mentioned. This section may also be relevant for observations related to locale formats (such as number, date, currency, format support).</p>


<div id="insert-culturespecific"></div>
    </section>



<section id="other" class="tbd">
    <h3 id="x6-2-what-else"><bdi class="secno">6.2 </bdi>What else?<a class="self-link" aria-label="§" href="#other"></a></h3>
    <p class="status_prompt">There are many other CSS modules which may need review for script-specific requirements, not to mention the SVG, HTML, Speech, MathML and other specifications. What else is likely to cause problems for worldwide deployment of the Web, and what requirements need to be addressed to make the Web function well locally?</p>


<div id="insert-other"></div>
    </section>
    
</section>



<details>
<summary style="margin-top:4em; cursor: pointer;" onclick="setUpSummary(); printSummary(true)">Show summary</summary>
<pre id="summaryPlaceholder" style="white-space: pre-wrap;"></pre>
</details>
<script>
if (window.location.href.includes('/TR/')) document.getElementById('summaryStats').style.display = 'none'
</script>









<p role="navigation" id="back-to-top">
    <a href="#title"><abbr title="Back to Top">↑</abbr></a>
  </p><script id="respec-dfn-panel">(() => {
// @ts-check
if (document.respec) {
  document.respec.ready.then(setupPanel);
} else {
  setupPanel();
}

function setupPanel() {
  const listener = panelListener();
  document.body.addEventListener("keydown", listener);
  document.body.addEventListener("click", listener);
}

function panelListener() {
  /** @type {HTMLElement} */
  let panel = null;
  return event => {
    const { target, type } = event;

    if (!(target instanceof HTMLElement)) return;

    // For keys, we only care about Enter key to activate the panel
    // otherwise it's activated via a click.
    if (type === "keydown" && event.key !== "Enter") return;

    const action = deriveAction(event);

    switch (action) {
      case "show": {
        hidePanel(panel);
        /** @type {HTMLElement} */
        const dfn = target.closest("dfn, .index-term");
        panel = document.getElementById(`dfn-panel-for-${dfn.id}`);
        const coords = deriveCoordinates(event);
        displayPanel(dfn, panel, coords);
        break;
      }
      case "dock": {
        panel.style.left = null;
        panel.style.top = null;
        panel.classList.add("docked");
        break;
      }
      case "hide": {
        hidePanel(panel);
        panel = null;
        break;
      }
    }
  };
}

/**
 * @param {MouseEvent|KeyboardEvent} event
 */
function deriveCoordinates(event) {
  const target = /** @type HTMLElement */ (event.target);

  // We prevent synthetic AT clicks from putting
  // the dialog in a weird place. The AT events sometimes
  // lack coordinates, so they have clientX/Y = 0
  const rect = target.getBoundingClientRect();
  if (
    event instanceof MouseEvent &&
    event.clientX >= rect.left &&
    event.clientY >= rect.top
  ) {
    // The event probably happened inside the bounding rect...
    return { x: event.clientX, y: event.clientY };
  }

  // Offset to the middle of the element
  const x = rect.x + rect.width / 2;
  // Placed at the bottom of the element
  const y = rect.y + rect.height;
  return { x, y };
}

/**
 * @param {Event} event
 */
function deriveAction(event) {
  const target = /** @type {HTMLElement} */ (event.target);
  const hitALink = !!target.closest("a");
  if (target.closest("dfn:not([data-cite]), .index-term")) {
    return hitALink ? "none" : "show";
  }
  if (target.closest(".dfn-panel")) {
    if (hitALink) {
      return target.classList.contains("self-link") ? "hide" : "dock";
    }
    const panel = target.closest(".dfn-panel");
    return panel.classList.contains("docked") ? "hide" : "none";
  }
  if (document.querySelector(".dfn-panel:not([hidden])")) {
    return "hide";
  }
  return "none";
}

/**
 * @param {HTMLElement} dfn
 * @param {HTMLElement} panel
 * @param {{ x: number, y: number }} clickPosition
 */
function displayPanel(dfn, panel, { x, y }) {
  panel.hidden = false;
  // distance (px) between edge of panel and the pointing triangle (caret)
  const MARGIN = 20;

  const dfnRects = dfn.getClientRects();
  // Find the `top` offset when the `dfn` can be spread across multiple lines
  let closestTop = 0;
  let minDiff = Infinity;
  for (const rect of dfnRects) {
    const { top, bottom } = rect;
    const diffFromClickY = Math.abs((top + bottom) / 2 - y);
    if (diffFromClickY < minDiff) {
      minDiff = diffFromClickY;
      closestTop = top;
    }
  }

  const top = window.scrollY + closestTop + dfnRects[0].height;
  const left = x - MARGIN;
  panel.style.left = `${left}px`;
  panel.style.top = `${top}px`;

  // Find if the panel is flowing out of the window
  const panelRect = panel.getBoundingClientRect();
  const SCREEN_WIDTH = Math.min(window.innerWidth, window.screen.width);
  if (panelRect.right > SCREEN_WIDTH) {
    const newLeft = Math.max(MARGIN, x + MARGIN - panelRect.width);
    const newCaretOffset = left - newLeft;
    panel.style.left = `${newLeft}px`;
    /** @type {HTMLElement} */
    const caret = panel.querySelector(".caret");
    caret.style.left = `${newCaretOffset}px`;
  }

  // As it's a dialog, we trap focus.
  // TODO: when <dialog> becomes a implemented, we should really
  // use that.
  trapFocus(panel, dfn);
}

/**
 * @param {HTMLElement} panel
 * @param {HTMLElement} dfn
 * @returns
 */
function trapFocus(panel, dfn) {
  /** @type NodeListOf<HTMLAnchorElement> elements */
  const anchors = panel.querySelectorAll("a[href]");
  // No need to trap focus
  if (!anchors.length) return;

  // Move focus to first anchor element
  const first = anchors.item(0);
  first.focus();

  const trapListener = createTrapListener(anchors, panel, dfn);
  panel.addEventListener("keydown", trapListener);

  // Hiding the panel releases the trap
  const mo = new MutationObserver(records => {
    const [record] = records;
    const target = /** @type HTMLElement */ (record.target);
    if (target.hidden) {
      panel.removeEventListener("keydown", trapListener);
      mo.disconnect();
    }
  });
  mo.observe(panel, { attributes: true, attributeFilter: ["hidden"] });
}

/**
 *
 * @param {NodeListOf<HTMLAnchorElement>} anchors
 * @param {HTMLElement} panel
 * @param {HTMLElement} dfn
 * @returns
 */
function createTrapListener(anchors, panel, dfn) {
  const lastIndex = anchors.length - 1;
  let currentIndex = 0;
  return event => {
    switch (event.key) {
      // Hitting "Tab" traps us in a nice loop around elements.
      case "Tab": {
        event.preventDefault();
        currentIndex += event.shiftKey ? -1 : +1;
        if (currentIndex < 0) {
          currentIndex = lastIndex;
        } else if (currentIndex > lastIndex) {
          currentIndex = 0;
        }
        anchors.item(currentIndex).focus();
        break;
      }

      // Hitting "Enter" on an anchor releases the trap.
      case "Enter":
        hidePanel(panel);
        break;

      // Hitting "Escape" returns focus to dfn.
      case "Escape":
        hidePanel(panel);
        dfn.focus();
        return;
    }
  };
}

/** @param {HTMLElement} panel */
function hidePanel(panel) {
  if (!panel) return;
  panel.hidden = true;
  panel.classList.remove("docked");
}
})()</script><script src="https://www.w3.org/scripts/TR/2016/fixup.js"></script></body></html>